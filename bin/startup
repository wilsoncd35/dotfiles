#!/usr/bin/env bash

#
# Startup.
#
# Intended to be called from .zshrc, .bash_profile, etc. on new session.
#

#
# Relative paths to libraries.
#
  lib_paths=(
    ../lib/log.sh
  )
  for lib_path in "${lib_paths[@]}"; do
    SCRIPT_PATH="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
    if [ -e "$SCRIPT_PATH/$lib_path" ]; then
      # Is source of a source.
      source "$SCRIPT_PATH/$lib_path"
    else
      # Is a source.
      SCRIPT_PATH=$(dirname "$0")
      source "$SCRIPT_PATH/$lib_path"
    fi
  done

main() {
  local versions=''

  command -v node > /dev/null 2>&1
  if [ "$?" -eq 0 ]; then
    versions="node $(node -v | awk -F 'v' '{print $2}')"
  else
    versions='node NA'
  fi

  command -v npm > /dev/null 2>&1
  if [ "$?" -eq 0 ]; then
    versions="$versions, npm $(npm -v)"
  else
    versions="$versions, npm NA"
  fi

  command -v python > /dev/null 2>&1
  if [ "$?" -eq 0 ]; then
    versions="$versions, python3 $(python --version | awk -F ' ' '{print $2}')"
  else
    versions="$versions, python NA"
  fi

  log "$versions"
}

main
